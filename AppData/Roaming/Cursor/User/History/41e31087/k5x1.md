# Troubleshoot Blank Page on Netlify

## üî¥ You've Added Environment Variables But Still See Blank Page?

Follow these steps in order:

---

## Step 1: Verify You Redeployed After Adding Variables ‚ö†Ô∏è

**CRITICAL:** Environment variables only take effect AFTER a new deployment!

### Check if you redeployed:
1. Go to Netlify Dashboard ‚Üí Your Site ‚Üí **Deploys** tab
2. Look at the **latest deployment timestamp**
3. **Was it deployed AFTER you added the environment variables?**

### If NOT, trigger a new deployment:
1. Go to **Deploys** tab
2. Click **"..."** (three dots) on the latest deployment
3. Click **"Trigger deploy"** ‚Üí **"Clear cache and deploy site"**
4. Wait 2-3 minutes for build to complete

---

## Step 2: Check Browser Console for Errors üîç

**This is the MOST IMPORTANT step!**

1. Open your Netlify site in a browser
2. Press **F12** (or right-click ‚Üí Inspect)
3. Go to **Console** tab
4. Look for **RED error messages**

### Common Errors You Might See:

**Error 1: "Missing Firebase environment variables"**
- ‚úÖ Solution: Variables not set correctly or not redeployed
- Check: Netlify ‚Üí Environment variables ‚Üí Make sure all 8 variables are there

**Error 2: "Failed to fetch" or Network errors**
- ‚úÖ Solution: CORS or API connection issue
- Check: Browser Network tab for failed requests

**Error 3: "Cannot read property of undefined"**
- ‚úÖ Solution: Code error - share the full error message

**Error 4: Service Worker errors**
- ‚úÖ Solution: Clear service worker cache (see Step 5)

### üì∏ **Take a screenshot of the console errors and share them!**

---

## Step 3: Check Netlify Build Logs üìã

1. Go to Netlify Dashboard ‚Üí Your Site
2. Click **Deploys** tab
3. Click on the **latest deployment** (the one at the top)
4. Scroll down to **"Deploy log"**
5. Look for:
   - ‚úÖ **"Build script"** section - did it succeed?
   - ‚ùå Any **RED error messages**?

### What to Look For:

**‚úÖ Good Build Log:**
```
Build script
$ bun run build
‚úì Built in 2.3s
```

**‚ùå Bad Build Log:**
```
Build script
$ bun run build
‚úó Error: Cannot find module...
‚úó Build failed
```

### If Build Failed:
- Share the error message from the build log
- Check if `bun` is installed correctly
- Try changing build command to `npm run build` instead

---

## Step 4: Verify Build Settings ‚öôÔ∏è

1. Go to Netlify Dashboard ‚Üí Your Site
2. Go to **Build & deploy** ‚Üí **Build settings**
3. Verify these settings:

**Build command:**
- Should be: `bun run build` OR `npm run build`
- If `bun` doesn't work, try `npm run build`

**Publish directory:**
- Should be: `dist`
- NOT `build` or `public`

**Node version:**
- Should be: `20` (or latest)

---

## Step 5: Clear Service Worker Cache üßπ

Service workers can cache old broken versions!

### Option A: Clear in Browser
1. Open your site
2. Press **F12** ‚Üí Go to **Application** tab (Chrome) or **Storage** tab (Firefox)
3. Find **Service Workers** section
4. Click **Unregister** for your site
5. Find **Cache Storage** section
6. Delete all caches for your site
7. **Hard refresh**: Press `Ctrl+Shift+R` (Windows) or `Cmd+Shift+R` (Mac)

### Option B: Disable Service Worker Temporarily
1. Open your site
2. Press **F12** ‚Üí **Application** tab ‚Üí **Service Workers**
3. Check **"Bypass for network"**
4. Refresh the page

---

## Step 6: Verify Environment Variables Are Set ‚úÖ

1. Go to Netlify Dashboard ‚Üí Your Site
2. Go to **Site configuration** ‚Üí **Environment variables**
3. Verify you have **ALL 8 variables**:

**Firebase (6):**
- [ ] `VITE_FIREBASE_API_KEY`
- [ ] `VITE_FIREBASE_AUTH_DOMAIN`
- [ ] `VITE_FIREBASE_PROJECT_ID`
- [ ] `VITE_FIREBASE_STORAGE_BUCKET`
- [ ] `VITE_FIREBASE_MESSAGING_SENDER_ID`
- [ ] `VITE_FIREBASE_APP_ID`

**Supabase (2):**
- [ ] `VITE_SUPABASE_URL`
- [ ] `VITE_SUPABASE_ANON_KEY`

4. For each variable, check:
   - ‚úÖ **Value is correct** (not empty, no typos)
   - ‚úÖ **Scopes enabled**: Production, Deploy previews, Branch deploys

---

## Step 7: Test Environment Variables in Build üî¨

Add this temporary debug code to verify variables are being read:

1. In `src/firebaseConfig.js`, temporarily add at the top:
```javascript
console.log('üîç Environment Check:', {
  hasApiKey: !!import.meta.env.VITE_FIREBASE_API_KEY,
  hasProjectId: !!import.meta.env.VITE_FIREBASE_PROJECT_ID,
  hasSupabaseUrl: !!import.meta.env.VITE_SUPABASE_URL,
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY?.substring(0, 10) + '...',
});
```

2. Commit and push:
```bash
git add src/firebaseConfig.js
git commit -m "Debug env vars"
git push
```

3. Wait for Netlify to rebuild
4. Check browser console - you should see the debug log
5. If you see `hasApiKey: false`, the variables aren't being read!

---

## Step 8: Check if Files Are Being Served üìÅ

1. Open your Netlify site
2. Press **F12** ‚Üí **Network** tab
3. Refresh the page
4. Look for these files:
   - ‚úÖ `index.html` - should load (status 200)
   - ‚úÖ `assets/index-*.js` - should load (status 200)
   - ‚úÖ `assets/index-*.css` - should load (status 200)

### If files are 404 (not found):
- Build didn't create the files
- Check build logs for errors
- Verify publish directory is `dist`

### If files are 200 but page is blank:
- JavaScript error (check Console tab)
- Environment variable issue

---

## Step 9: Try a Hard Refresh üîÑ

Sometimes the browser is just showing a cached version:

1. **Chrome/Edge:**
   - Press `Ctrl+Shift+R` (Windows) or `Cmd+Shift+R` (Mac)
   - OR `Ctrl+F5`

2. **Firefox:**
   - Press `Ctrl+Shift+R` (Windows) or `Cmd+Shift+R` (Mac)

3. **Safari:**
   - Press `Cmd+Option+R`

4. **Or use Incognito/Private mode:**
   - Open site in a new incognito window
   - This bypasses all cache

---

## Step 10: Check Content Security Policy (CSP) üõ°Ô∏è

Your `index.html` has a CSP that might be blocking resources.

1. Check browser console for CSP violations
2. Look for errors like: "Refused to load script because it violates CSP"

If you see CSP errors, we may need to adjust the CSP in `index.html`.

---

## üÜò Still Not Working? Share This Info:

1. **Browser Console Errors:**
   - Screenshot or copy all RED error messages

2. **Netlify Build Log:**
   - Copy the "Build script" section
   - Any error messages?

3. **Network Tab:**
   - Are files loading? (status codes)
   - Any failed requests?

4. **Environment Variables:**
   - How many variables do you have in Netlify?
   - Are they all enabled for Production?

5. **Deployment:**
   - When did you last deploy? (timestamp)
   - Did you deploy AFTER adding variables?

---

## ‚úÖ Quick Checklist

- [ ] Redeployed AFTER adding environment variables
- [ ] Checked browser console (F12) for errors
- [ ] Checked Netlify build logs - build succeeded?
- [ ] Verified all 8 environment variables are set
- [ ] Cleared service worker cache
- [ ] Tried hard refresh (Ctrl+Shift+R)
- [ ] Tried incognito/private mode
- [ ] Build settings: command = `bun run build`, publish = `dist`

---

## üéØ Most Common Issues:

1. **Didn't redeploy after adding variables** (90% of cases!)
2. **Variables not enabled for Production scope**
3. **Service worker caching old broken version**
4. **Build failed but you didn't notice**
5. **JavaScript error in console** (check F12!)

---

**Start with Step 1 and Step 2 - those solve 90% of blank page issues!**

