# Performance Testing Guide

## Overview

This guide provides instructions for testing application performance under various conditions.

## Test Scenarios

### 1. Generation with 1000+ Members

#### Setup:
1. Add 1000+ members across all groups:
   - DCC: 200 members
   - Santé: 50 members
   - Cook: 100 members
   - Drive: 150 members
   - Officers: 100 members
   - Sous-Officiers (each campaign): 200 members
   - HDT (each pool): 300 members

#### Test Steps:
1. Open "Monthly Generation" section
2. Select a month
3. Click "Generate Assignments"
4. Measure time from click to completion

#### Expected Results:
- Generation completes within 30 seconds
- No UI freezing
- Progress indicators visible
- Success message appears

#### Performance Metrics:
- **Target**: < 30 seconds for 1000+ members
- **Acceptable**: < 60 seconds
- **Unacceptable**: > 60 seconds or UI freeze

#### Optimization Notes:
- Database indexes on `assignments_log(month, group, member_name)`
- Batch inserts for assignments
- Transaction-based operations

---

### 2. History Table Scrolling Smoothness

#### Setup:
1. Generate assignments for 12+ months
2. Ensure 1000+ history records

#### Test Steps:
1. Open "History" section
2. Scroll through the table:
   - Scroll down slowly
   - Scroll down quickly
   - Scroll up
   - Use mouse wheel
   - Use scrollbar

#### Expected Results:
- Smooth scrolling (60 FPS)
- No lag or stuttering
- Table renders correctly
- Filters work during scroll

#### Performance Metrics:
- **Target**: 60 FPS scrolling
- **Acceptable**: 30 FPS
- **Unacceptable**: < 30 FPS or visible lag

#### Optimization Notes:
- Virtual scrolling for large tables (future enhancement)
- Pagination for history (future enhancement)
- Limit visible rows to 100-200

---

### 3. Database File Size Management

#### Test Scenarios:

##### Scenario A: Small Dataset
- 100 members
- 12 months of assignments
- Expected size: < 1 MB

##### Scenario B: Medium Dataset
- 500 members
- 24 months of assignments
- Expected size: 5-10 MB

##### Scenario C: Large Dataset
- 1000+ members
- 36+ months of assignments
- Expected size: 20-50 MB

#### Test Steps:
1. Check database file size:
   - Location: `%APPDATA%\نظام إدارة التوزيع\database\pme.db`
   - Right-click → Properties → Size
2. Generate assignments for multiple months
3. Check size after each month
4. Clear old logs
5. Check size reduction

#### Expected Results:
- Database size grows linearly with data
- Clearing old logs reduces size
- No unexpected bloat
- WAL files managed properly

#### Performance Metrics:
- **Target**: < 50 MB for 1000 members, 36 months
- **Acceptable**: < 100 MB
- **Unacceptable**: > 100 MB or exponential growth

#### Optimization Notes:
- SQLite WAL mode for better performance
- Regular VACUUM (future enhancement)
- Index optimization
- Archive old data (future enhancement)

---

## Performance Benchmarks

### Database Operations:

| Operation | Target | Acceptable | Notes |
|-----------|--------|------------|-------|
| Add Member | < 100ms | < 500ms | Single insert |
| Get Members | < 50ms | < 200ms | With index |
| Generate Month | < 30s | < 60s | 1000+ members |
| Query History | < 200ms | < 1s | With filters |
| Export CSV | < 2s | < 5s | 1000 records |
| Export PDF | < 5s | < 10s | 1000 records |
| Backup | < 1s | < 3s | 10 MB database |
| Restore | < 2s | < 5s | 10 MB database |

### UI Operations:

| Operation | Target | Acceptable | Notes |
|-----------|--------|------------|-------|
| Page Load | < 500ms | < 1s | Initial load |
| Section Switch | < 200ms | < 500ms | Navigation |
| Table Render | < 300ms | < 1s | 100 rows |
| Filter Apply | < 100ms | < 300ms | Real-time |
| Modal Open | < 100ms | < 300ms | Instant feel |

---

## Testing Tools

### Built-in Performance Monitoring:

1. **Browser DevTools** (if enabled):
   - Performance tab
   - Network tab
   - Memory profiler

2. **Database Size Check**:
   - File system properties
   - Settings page shows database location

3. **Manual Timing**:
   - Use stopwatch for operations
   - Note start/end times

---

## Optimization Checklist

### Database:
- [x] Indexes on frequently queried fields
- [x] WAL mode enabled
- [x] Batch inserts for assignments
- [x] Transaction-based operations
- [ ] VACUUM on old data (future)
- [ ] Archive old assignments (future)

### UI:
- [x] Efficient table rendering
- [x] Lazy loading where possible
- [x] Debounced search/filter
- [ ] Virtual scrolling (future)
- [ ] Pagination (future)

### Code:
- [x] Removed console.log (production)
- [x] Minified CSS/JS (production)
- [x] Optimized queries
- [ ] Code splitting (future)

---

## Reporting Issues

When reporting performance issues, include:

1. **System Information**:
   - Windows version
   - RAM amount
   - CPU model
   - Disk type (HDD/SSD)

2. **Test Conditions**:
   - Number of members
   - Number of months
   - Database size
   - Operation being tested

3. **Performance Metrics**:
   - Time taken
   - Memory usage (if available)
   - CPU usage (if available)
   - Screenshots/videos

4. **Steps to Reproduce**:
   - Detailed steps
   - Expected vs actual results

---

## Continuous Monitoring

### Regular Checks:

- **Weekly**: Check database size
- **Monthly**: Review performance metrics
- **Quarterly**: Full performance audit

### Maintenance:

- Clear old logs annually
- Backup database regularly
- Monitor disk space
- Review and optimize queries

---

## Notes

- Performance may vary based on hardware
- First load may be slower (database initialization)
- Large datasets require more resources
- Regular maintenance improves performance

